<!DOCTYPE html>
<html>

<head>
  <title>comply</title>

  <link rel="stylesheet" type="text/css" href="index.css">

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Make your C comply to a set of strict style rules.">
</head>

<body>
  <article>
    <img src="logo.svg" alt="comply" align="left" style="width: 2cm; margin-left: -1cm; margin-right: .25cm;">
    <h1><strong>comply</strong></h1>
    <p class="subtitle">Strict style compliance</p>
    <section>
      <div class="example" style="width: 45%;">
        <p class="tip">
          Use these listings as a general guideline during development or as a reference when fixing violations.
        </p>
        <br/>
        <div class="indent">
          <div class="jump-list-title">Jump to:</div>
          <ul class="indent jump-list">
            <li><a href="#include-statements">Include statements</a></li>
            <li><a href="#misc">Miscellaneous</a></li>
          </ul>
        </div>
      </div>

      <p>
        <tt>comply</tt> is an open-source utility that helps you write better C.
      </p>
      <p>
        This page provides a listing of each rule that <tt>comply</tt> will validate your code against when running its checks.
      </p>
      <br/>
      <br/>
      <p>
        <a href="https://github.com/jhauberg/comply/archive/master.zip">Download</a>&nbsp;&nbsp;&nbsp;<a href="https://github.com/jhauberg/comply">View on GitHub</a>
      </p>
      
      <footer>
        <p>
          Rules are based on <strong><a href="https://github.com/jhauberg/comply/releases/tag/0.4.0">comply 0.4.1</a></strong> and was last edited on <strong>January 29th 2018</strong>
        </p>
      </footer>
    </section>
  
    <hr>

    <section>
      <h2 id="include-statements">Include statements</h2>
      <p>
        Rules related to <tt>#include</tt> statements.
      </p>
      <table class="rules">
        <thead>
          <tr>
            <th>Name</a></th>
            <th>Description</th>
            <th>Why is this important?</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><p id="list-needed-symbols"><tt>list-needed-symbols</tt></p></td>
            <td>
              <p>Requires <tt>#include</tt> statements to be suffixed with a comma-separated list of all the symbols needed from the included header or file.</p>
              <details>
                <summary><strong>Read more</strong></summary>
              <pre>
                <code class="bad">
#include &lt;stdbool.h&gt;
                </code>
                <code class="good">
#include &lt;stdbool.h&gt; // bool
                </code>
              </pre>
              <p>You can indicate that you need every symbol of a specific pattern by applying the star-character:</p>
              <pre>
                <code>
// Require all symbols starting with 'mylib_'
#include &lt;mylib.h&gt; // mylib_*
                </code>
              </pre>
            </details>
            </td>
            <td><p class="reasoning">Helps in determining dependencies that are no longer needed and could be removed, and encourages use of smaller, more well-defined headers.</p>
              <p class="reasoning">Fewer dependencies reduce complexity, so if an inclusion does not need any symbols, it should be removed.<br/><br/>If a symbol is <em>expectedly</em> needed in a <em>different</em> source file, the inclusion should be moved to that file.</p>
              <div class="references"><p><strong>References:</strong></p>
                <ul class="indent">
                  <li>Malcolm Inglis: <a href="https://github.com/mcinglis/c-style#comment-non-standard-library-includes-to-say-what-symbols-you-use-from-them"><em>c-style</em></a></li>
              </ul>
              </div>
              </td>
          </tr>
          <tr>
            <td><p><tt>symbol-listed-not-needed</tt></p></td>
            <td><p>Requires that any symbol listed as needed by an <tt>#include</tt> statement should also be used in the same source file.</p><p><em>See <a href="#list-needed-symbols"><tt>list-needed-symbols</tt></a></em></p></td>
            <td><p class="reasoning">Helps determining symbols that are no longer used, potentially leading to being able to remove the inclusion completely, improving maintainability.</p></td>
          </tr>
          <tr>
            <td><p><tt>symbol-needed-not-listed</tt></p></td>
            <td><p>Requires that any used symbol be listed as needed by an <tt>#include</tt> statement.</p><p><em>Not available as a check</em></p></td>
            <td><p class="reasoning">Helps determining which symbols should be listed as needed, which in turn improves maintainability.</p></td>
          </tr>
          <tr>
            <td><p id="no-headers-header"><tt>no-headers-header</tt></p></td>
            <td><p>Requires that header files do not include any other headers.</p>
              <details>
                <summary><strong>Read more</strong></summary>
              <p>Instead, headers should provide forward-declarations of each needed type and let the implementation include any necessary headers.</p>
              <pre>
  <strong>mylib_header.h</strong>
                <code class="bad">
#include &lt;mylib/type.h&gt;
#include &lt;mylib/attr.h&gt;

...
                </code>
  <strong>mylib_header.h</strong>
                <code class="good">
struct mylib_t;
struct attr_t;

...

#endif
                </code>
              </pre>
              </details>
            </td>
            <td><p class="reasoning">Avoiding header inclusions helps with keeping compile times low.</p>
              <p class="reasoning">Forces source files to include <em>everything</em> needed. This might seem like it would be a big hassle- that's because it is. The benefit, however, is that a reader will immediately be aware of <em>all</em> dependencies of the specific unit.<br/><br/>It might even make you think a little bit harder about your design in general once the list grows annoyingly long.<br/><br/>Whenever possible, avoid dependencies.</p>
              <div class="references"><p><strong>References:</strong></p>
                <ul class="indent">
                  <li>Our Machinery: <a href="http://ourmachinery.com/post/physical-design"><em>Physical Design</em></a></li>
                  <li>Rob Pike: <a href="http://www.lysator.liu.se/c/pikestyle.html"><em>Notes on Programming in C</em></a></li>
                  <li>Malcolm Inglis: <a href="https://github.com/mcinglis/c-style#include-the-definition-of-everything-you-use"><em>c-style</em></a></li>
              </ul>
              </div>
            </td>
          </tr>
          <tr>
            <td><p><tt>include-guard</tt></p></td>
            <td><p>Requires that the contents of headers be wrapped in <em>include guards</em> named identically to the filename of the header.</p>
              <details>
                <summary><strong>Read more</strong></summary>
              <pre>
  <strong>mylib_header.h</strong>
                <code class="bad">

...

                </code>
  <strong>mylib_header.h</strong>
                <code class="good">
#ifndef mylib_header_h
#define mylib_header_h

...

#endif
                </code>
              </pre>
              <p>
                <em>Fully implementing and strictly enforcing <a href="#no-headers-header"><tt>no-headers-header</tt></a> actually makes this rule unnecessary.</em></p><p><em>Regardless, it is still advised to enforce it as a precaution against unruly includers.</em></p>
              </details>
            </td>
            <td><p class="reasoning">Helps prevent double inclusion errors.</p></td>
          </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h2 id="misc">Miscellaneous</h2>
      <p>
        Rules related to code in general.
      </p>
      <table class="rules">
        <thead>
          <tr>
            <th>Name</a></th>
            <th>Description</th>
            <th>Why is this important?</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><p><tt>line-too-long</tt></p></td>
            <td><p>Requires lines to not exceed 80 characters.</p></td>
            <td><p class="reasoning">Any line of code should fit on the screen it is being viewed on under any scenario; whether single file or side-by-side.<br/><br/>Lines that are too long can be difficult to visually comprehend, and wrapping or scrolling makes it harder to read.<p/><p class="reasoning">Lines shorter than 80 characters fits on most viewers and will improve readability significantly.</p>
              <div class="references"><p><strong>References:</strong></p>
                <ul class="indent">
                  <li>Malcolm Inglis: <a href="https://github.com/mcinglis/c-style#never-have-more-than-79-characters-per-line"><em>c-style</em></a></li>
              </ul>
              </div>
            </td>
          </tr>
          <tr>
            <td><p><tt>file-too-long</tt></p></td>
            <td><p>Requires files to not exceed 600 lines.</p></td>
            <td><p class="reasoning">Files that are very long can be difficult to comprehend and may indicate that the complexity of the code is too high.<p/><p class="reasoning">Considerations should be made whether code can be refactored or split up into smaller units.</p></td>
          </tr>
        </tbody>
      </table>
    </section>

  </article>
  <p>
    Made by <a href="https://github.com/jhauberg">Jacob Hauberg Hansen</a>. Page sources are <a href="https://github.com/jhauberg/comply/tree/master/docs">available on GitHub</a>.
  </p>
</body>

</html>
